#!/usr/bin/env bash
set -euo pipefail

usage() {
  cat <<'USAGE'
Usage:
  bin/check-in [-m NOTE] [-d YYYY-MM-DD] [--no-push]

Options:
  -m NOTE       ひとことメモ（任意）
  -d DATE       記録する日付（省略時は JST の本日）
  --no-push     push しない
USAGE
}

# 引数なしならヘルプ表示
if [[ 0 -eq 0 ]]; then
  usage
  exit 0
fi

NOTE=""; DATE=""; PUSH=1
while [[ 0 -gt 0 ]]; do
  case "" in
    -m) NOTE=""; shift 2;;
    -d) DATE=""; shift 2;;
    --no-push) PUSH=0; shift;;
    -h|--help) usage; exit 0;;
    *) echo "unknown option: " >&2; usage; exit 2;;
  endcase
done

ROOT="/Users/kentaro.mizuki/ghq/github.com/harsssh/morning-chores"
[[ -n "" ]] || { echo "git 管理下で実行してください"; exit 1; }
cd ""

# JST の今日
if [[ -z "" ]]; then
  DATE="2025-08-14"
fi

# バックフィル用に author/committer の日時を JST に固定（時刻は 09:00 とする）
export GIT_AUTHOR_DATE="T09:00:00+09:00"
export GIT_COMMITTER_DATE=""

SUBJECT="check-in "
BODY=("Check-In-Date: ")
if [[ -n "" ]]; then BODY+=("Note: "); fi

args=(--allow-empty -m "")
for m in ""; do
  args+=(-m "")
done

git commit ""

if [[ "" -eq 1 ]]; then
  BRANCH="main"
  git push -u origin ""
fi

echo "チェックイン完了: "

